{% extends 'base.html' %}

{% block title %}Dá»± Ä‘oÃ¡n tiá»ƒu Ä‘Æ°á»ng - Health Prediction System{% endblock %}

{% block content %}
<div class="form-container">
    <h2 class="form-title">ğŸ©º Dá»± Ä‘oÃ¡n nguy cÆ¡ tiá»ƒu Ä‘Æ°á»ng</h2>
    
    <form action="/predict" method="post" id="prediction-form">
        <div class="form-group">
            <input type="text" name="Pregnancies" placeholder="Sá»‘ láº§n mang thai (VD: 1)" required>
        </div>
        
        <div class="form-group">
            <input type="text" name="Glucose" placeholder="Ná»“ng Ä‘á»™ glucose (VD: 85)" required>
        </div>
        
        <div class="form-group">
            <input type="text" name="BloodPressure" placeholder="Huyáº¿t Ã¡p (VD: 66)" required>
        </div>
        
        <div class="form-group">
            <input type="text" name="SkinThickness" placeholder="Äá»™ dÃ y da (VD: 29)" required>
        </div>
        
        <div class="form-group">
            <input type="text" name="Insulin" placeholder="Insulin (VD: 0)" required>
        </div>
        
        <div class="form-group">
            <input type="text" name="BMI" placeholder="Chá»‰ sá»‘ BMI (VD: 26.6)" required>
        </div>
        
        <div class="form-group">
            <input type="text" name="DiabetesPedigreeFunction" placeholder="Chá»‰ sá»‘ di truyá»n (VD: 0.351)" required>
        </div>
        
        <div class="form-group">
            <input type="text" name="Age" placeholder="Tuá»•i (VD: 31)" required>
        </div>
        
        <button type="submit">ğŸ” Dá»± Ä‘oÃ¡n</button>
    </form>

    {% if prediction_text %}
    <div class="result 
        {% if 'Lá»—i' in prediction_text %}error
        {% elif 'nguy cÆ¡ máº¯c' in prediction_text %}warning  
        {% else %}success{% endif %}">
        <strong>Káº¿t quáº£:</strong> {{ prediction_text }}
    </div>
    {% endif %}
    
    <div class="sample-data">
        <strong>ğŸ“ Dá»¯ liá»‡u máº«u Ä‘á»ƒ test:</strong><br>
        <strong>TrÆ°á»ng há»£p bÃ¬nh thÆ°á»ng:</strong> 1, 85, 66, 29, 0, 26.6, 0.351, 31<br>
        <strong>TrÆ°á»ng há»£p cÃ³ nguy cÆ¡:</strong> 8, 183, 64, 0, 0, 23.3, 0.672, 32
    </div>
    
    <div style="background: #e8f4fd; padding: 20px; border-radius: 10px; border-left: 5px solid #667eea; margin-top: 20px;">
        <h4 style="color: #333; margin-bottom: 15px;">ğŸ”¬ CÃ´ng nghá»‡ AI/ML</h4>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
            <div style="text-align: center;">
                <div style="font-size: 2em; margin-bottom: 10px;">ğŸ¯</div>
                <strong style="color: #333;">Äá»™ chÃ­nh xÃ¡c cao</strong>
                <p style="color: #666; font-size: 0.9em; margin: 5px 0 0 0;">Sá»­ dá»¥ng thuáº­t toÃ¡n Random Forest</p>
            </div>
            <div style="text-align: center;">
                <div style="font-size: 2em; margin-bottom: 10px;">âš¡</div>
                <strong style="color: #333;">Káº¿t quáº£ nhanh</strong>
                <p style="color: #666; font-size: 0.9em; margin: 5px 0 0 0;">Dá»± Ä‘oÃ¡n trong vÃ i giÃ¢y</p>
            </div>
            <div style="text-align: center;">
                <div style="font-size: 2em; margin-bottom: 10px;">ğŸ“Š</div>
                <strong style="color: #333;">PhÃ¢n tÃ­ch chi tiáº¿t</strong>
                <p style="color: #666; font-size: 0.9em; margin: 5px 0 0 0;">XÃ¡c suáº¥t vÃ  Ä‘á»™ tin cáº­y</p>
            </div>
        </div>
    </div>
    
    <div style="background: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107; margin-top: 15px;">
        <p style="color: #856404; margin: 0; font-size: 14px; text-align: center;">
            <strong>ğŸ’¡ LÆ°u Ã½:</strong> Káº¿t quáº£ dá»± Ä‘oÃ¡n chá»‰ mang tÃ­nh cháº¥t tham kháº£o. Äá»ƒ cÃ³ cháº©n Ä‘oÃ¡n chÃ­nh xÃ¡c, vui lÃ²ng tham kháº£o Ã½ kiáº¿n bÃ¡c sÄ© chuyÃªn khoa.
        </p>
    </div>
</div>

<script>
    // Auto-fill sample data
    function fillSample(type) {
        const inputs = document.querySelectorAll('input[type="text"]');
        let sampleData;
        
        if (type === 'normal') {
            sampleData = [1, 85, 66, 29, 0, 26.6, 0.351, 31];
        } else {
            sampleData = [8, 183, 64, 0, 0, 23.3, 0.672, 32];
        }
        
        inputs.forEach((input, index) => {
            input.value = sampleData[index];
            input.style.borderColor = '#28a745';
        });
    }
    
    // Add sample buttons
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('prediction-form');
        const buttonDiv = document.createElement('div');
        buttonDiv.style.marginBottom = '15px';
        buttonDiv.innerHTML = `
            <button type="button" onclick="fillSample('normal')" style="width: 48%; margin-right: 4%; background: #28a745;">ğŸ“ Máº«u bÃ¬nh thÆ°á»ng</button>
            <button type="button" onclick="fillSample('risk')" style="width: 48%; background: #ffc107; color: #333;">âš ï¸ Máº«u cÃ³ nguy cÆ¡</button>
        `;
        form.insertBefore(buttonDiv, form.querySelector('button[type="submit"]'));
    });
    
    // Validation
    document.getElementById('prediction-form').addEventListener('submit', function(e) {
        const inputs = this.querySelectorAll('input[required]');
        let allValid = true;
        
        inputs.forEach(input => {
            const value = input.value.trim();
            if (!value || isNaN(value)) {
                allValid = false;
                input.style.borderColor = '#dc3545';
            } else {
                input.style.borderColor = '#28a745';
            }
        });
        
        if (!allValid) {
            e.preventDefault();
            alert('âŒ Vui lÃ²ng nháº­p sá»‘ há»£p lá»‡ cho táº¥t cáº£ cÃ¡c trÆ°á»ng!');
        }
    });
</script>
{% endblock %}